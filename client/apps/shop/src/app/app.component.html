<ng-container *ngIf="showLayout$ | async">
  <!--Header-->
  <header class="app-header">

    <div class="hide-s">

      <a mat-button routerLink="/">Home</a>

      <a mat-button routerLink="/about">About</a>

      <a mat-button [routerLink]="['/shop']">Shop</a>

    </div>

    <a routerLink="/"><img class="app-header-logo" src="assets/images/logo.svg" alt="Sanghamitra" width="60" height="60"></a>

    <div class="flex ai-center">

      <div class="hide-s">
        <ng-container *ngIf="state.user$ | async as user; else anonymous">
          <button mat-button [matMenuTriggerFor]="shopCategories">{{user.authData.displayName}}</button>
          <mat-menu #shopCategories="matMenu">
            <a mat-menu-item routerLink="/my-profile/settings">Settings</a>
            <a mat-menu-item routerLink="/my-profile/wish-list">Wish List</a>
            <a mat-menu-item routerLink="/my-profile/orders">Orders</a>
            <a mat-menu-item routerLink="/my-profile/reviews">Reviews</a>
            <hr>
            <button mat-menu-item (click)="logOut()">Sign out</button>
          </mat-menu>
        </ng-container>
        <ng-template #anonymous>
          <button mat-button (click)="logIn()">Login</button>
        </ng-template>
      </div>

      <button mat-button (click)="openCheckout()">Cart
        <ng-container *ngIf="cart.numOfItems$ | async as numOfItems; else empty">({{numOfItems}})</ng-container>
        <ng-template #empty></ng-template>
      </button>

      <button class="app-header-menu" (click)="openMobileHeader()" [class.active]="toggleMobileHeader">
        <span></span>
      </button>

    </div>

    <section class="app-header-mobile" [class.active]="toggleMobileHeader">
      <div class="flex f2">
        <a class="mobile-row-first link-home" (click)="openMobileHeader()" routerLink="/"><span>Home</span></a>
        <a class="mobile-row-first link-about" (click)="openMobileHeader()" routerLink="/about"><span>About</span></a>
        <a class="mobile-row-first link-shop" (click)="openMobileHeader()" [routerLink]="['/shop']" [queryParams]="{globalCategory: 'resortWear'}"><span>Shop</span></a>
      </div>
      <img class="mobile-row-logo f1" src="/assets/images/logo-full.svg" alt="Sanghamitra">
      <ng-container *ngIf="state.user$ | async as user; else anonymousMobile">
        <p class="app-header-mobile-username">{{user.authData.email}}</p>
        <div class="flex f2">
          <a class="mobile-row-second" (click)="openMobileHeader()" routerLink="/my-profile/settings">Settings</a>
          <a class="mobile-row-second" (click)="openMobileHeader()" routerLink="/my-profile/wish-list">Wish List</a>
          <a class="mobile-row-second" (click)="openMobileHeader()" routerLink="/my-profile/orders">Orders</a>
          <a class="mobile-row-second" (click)="openMobileHeader()" routerLink="/my-profile/reviews">Reviews</a>
        </div>
        <div class="app-header-mobile-signout flex ai-center jc-end">
          <button mat-button (click)="logOut()">Sign out</button>
        </div>
      </ng-container>
      <ng-template #anonymousMobile>
        <a class="mobile-row-login f2" (click)="logIn()">Login</a>
      </ng-template>
    </section>

  </header>
</ng-container>
<!--Main content-->
<main class="jfs-app-main">
  <router-outlet></router-outlet>
</main>

<ng-container *ngIf="showLayout$ | async">
  <footer class="bg-primary p-y-l">

    <div class="grid">
      <div class="col-8 col-m-6 col-s-12">
        <p>Get first access to new collections</p>
        <div class="p-l-s">
          <mat-form-field class="mat-hint">
            <input type="email" matInput placeholder="Email" [formControl]="email" #mailEl>
            <ng-container matSuffix>
              <mat-spinner *ngIf="loading$ | async; else loaded;" [diameter]="24"></mat-spinner>
              <ng-template #loaded>
                <button [disabled]="email.invalid" mat-icon-button (click)="submitEmail()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="#999999"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
              </ng-template>
            </ng-container>
            <mat-error *ngIf="email.invalid">Please enter a valid email</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="col-2 col-m-3 col-s-6 col-xs-12 ta-right">
        <p class="p-y-xs"><a class="link ws-nowrap">Shipping & returns</a></p>
        <p class="p-y-xs"><a class="link ws-nowrap">Terms of service</a></p>
        <!--<p class="p-y-xs"><a class="link ws-nowrap">Contact</a></p>-->
      </div>
      <div class="col-2 col-m-3 col-s-6 col-xs-12 ta-right">
        <p class="p-y-xs"><a class="link ws-nowrap" target="_blank" rel="noopener" href="https://www.instagram.com/sanghamitraphukan/">Instagram</a></p>
        <p class="p-y-xs"><a class="link ws-nowrap" target="_blank" rel="noopener" href="https://www.facebook.com/sanghamitrabijuphukan/">Facebook</a></p>
        <!--<p class="p-y-xs"><a class="link ws-nowrap" target="_blank" rel="noopener" href="">Twitter</a></p>-->
      </div>
      <div class="col-12 ta-right p-t-m">
        <p>© 2019 Sanghamitra Phukan — By <a class="link" target="_blank" href="https://jaspero.co">Jaspero</a></p>
      </div>
    </div>

  </footer>
</ng-container>
