<ng-container *ngIf="data$ | async as data">

  <!--Product-->
  <section class="p-t-l">

    <div class="ta-center starting-line">
      <h1 class="title">{{data.product.name}}</h1> <!--TODO: add product.short-->
    </div>

    <div class="grid grid-small connecting-line">

      <div class="col-6 col-xs-12">
        <div class="product-mobile-gallery">
          <div class="aspect-ratio product-img" data-ratio="2:3" *ngFor="let prod of data.product.gallery">
            <img class="aspect-item" src="{{data.prod}}">
          </div>
        </div>
      </div>

      <div class="col-6 col-xs-12">
        <section class="sticky-cart p-y-s">
          <h2 class="m-b-xs">{{data.product.name}}</h2>
          <h2>{{data.product.price | currency}}</h2>
          <div class="p-t-s p-b-m" *ngIf="quantity; else elsecase">
            <button class="product-add-cart" mat-flat-button color="primary" (click)="cart.add(product, form ? form.getRawValue() : null)">Add more to cart (currently: {{quantity}})</button>
          </div>
          <ng-template #elsecase>
            <div class="p-t-s p-b-m">
              <button class="product-add-cart" mat-flat-button color="primary" (click)="cart.add(product, form ? form.getRawValue() : null)">Add to cart</button>
            </div>
          </ng-template>
          <h2 class="m-b-xs">Product Details</h2>
          <div class="product-description ff-secondary">
            <p>This delicate lingerie inspired, 90s style, slip dress is an
              ideal choice when you are feeling flirty and feminine.
              Look stylish all throughout, in this hassle free dress.</p>
            <ul>
              <li><b>Size</b>: s</li>
              <li><b>Fabric</b>: Crepe, Silk Lace and Sheer Net</li>
              <li>Hand Made In India</li>
            </ul>
          </div>
        </section>
      </div>

    </div>

  </section>

  <!--Similar products-->
  <section class="p-b-l">
    <div class="ta-center starting-line line-top-margin">
      <h1 class="title">Related</h1>
    </div>
    <div class="grid grid-shop jc-start connecting-line ending-line" *ngIf="similar$ | async as similarProducts">
      <div class="col-6 col-xs-12" *ngFor="let next of similarProducts">
        <jfs-product-card
          [product]="next">
        </jfs-product-card>
      </div>
    </div>
  </section>

</ng-container>
